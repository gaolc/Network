+ ##### IPv6基本报头

![IPv6基本报头](.\images\IPv6基本报头.png)

+ ##### IPv6扩展报头

IPv6扩展报头是跟在IPv6基本报头后面的可选报头，可以有一个或多个或者0个

++    1 分片扩展报头

逐条扩展报头

目的选项扩展报头

认证扩展报头

封装净载扩展报头

分片扩展报头

安全扩展报头



IPv6 地址长度为128比特，每16比特划分为一段，每段由4个十六进制数表示，并用冒号隔开

IPv6 地址包括网络前缀和接口标识两部分



| IPv6地址范围            | 描述                                 | 类似IPv4                  |
| ----------------------- | ------------------------------------ | ------------------------- |
| 2000::/3                | 全球单播地址                         | 公网地址                  |
| 2001:0DB8::/32          | 保留地址                             |                           |
| FE80::/10               | 链路本地地址（只能在一段链路上使用） | 169.254.0.0/16            |
| FF00::/8                | 组播地址                             | 224.0.0.0~239.255.255.255 |
| ::/128                  | 未指定地址                           | 0.0.0.0(DHCP请求是源地址) |
| ::1/128                 | 环回地址                             | 127.0.0.0/8               |
| FC::/7 （unique local） | 私有地址                             |                           |

RFC3879 有详细描述IPv6私有地址

+ 数据流的区分

  ++    IPv4区分一条数据流（5元组）

源目ip

源目端口

协议

++    IPv6区分一条数据流（3元组）

源目ipv6

Flow label







EUI-64规范

1.将48bits的mac地址扩充到64bits EUI-64

2.EUI-64 的第7位反转

3.添加前缀 FE80::

将FFFE插入mac地址的前24位与后24位之间，并将第7 位的0改为1 ，即可生产接口ID 



#路由器配置

ipv6 

inter  g0/0/0 

ipv6 enable

ipv6 address 2000::1 64     #全球单播地址

display ipv4 inter g0/0/0



#主机配置

ipv6 

inter g0/0/0

ipv6 enable 

ipv6 address auto global 

ipv6 address auto global  defult  #学习缺省路由





IPv6无状态地址DAD检查

类似IPv4无故arp

邻居请求

ICMP TYPE =135

